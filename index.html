<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6847506129570052" crossorigin="anonymous"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #047857; --accent: #b45309; --bg: #f8fafc; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); margin: 0; padding: 0; color: #1e293b; }
        
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        
        header { background: white; padding: 15px 5%; display: none; justify-content: space-between; align-items: center; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        
        .welcome-msg { font-weight: 700; color: var(--primary); margin-left: 15px; font-size: 1.1rem; }

        .container { max-width: 1200px; margin: 30px auto; padding: 20px; display: none; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .card { background: white; border-radius: 20px; padding: 25px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; transition: 0.3s; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        
        .btn { width: 100%; padding: 14px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; margin-top: 15px; font-family: 'Cairo'; font-size: 1rem; transition: 0.2s; }
        .btn-buy { background: var(--accent); color: white; }
        .btn-read { background: var(--primary); color: white; }
        .btn:active { transform: scale(0.95); }
        
        #quiz-section { background: white; padding: 30px; border-radius: 25px; margin-bottom: 40px; text-align: center; border: 2px solid #e2e8f0; }
        .quiz-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .option-btn { padding: 15px; background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 15px; cursor: pointer; font-family: 'Cairo'; font-size: 1.1rem; }
        .option-btn:hover { border-color: var(--primary); background: #f0fdf4; }

        .viewer { display: none; background: white; padding: 50px; border-radius: 30px; line-height: 2.4; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); }
        .viewer h1 { font-size: 2.2rem; color: var(--primary); margin-bottom: 30px; border-bottom: 3px solid #f1f5f9; padding-bottom: 15px; }
        .viewer p { font-size: 1.4rem; color: #334155; text-align: justify; white-space: pre-wrap; }
    </style>
</head>
<body>

<div id="login-overlay">
    <div style="background:white; padding:40px; border-radius:30px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);">
        <h1 style="color:var(--primary); font-size:2.5rem; margin-bottom:10px;">ğŸ“– Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù†Ø®Ø¨Ø©</h1>
        <p style="color:#64748b; margin-bottom:30px;">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø§Ù„Ø¢Ù† ÙˆØ§Ø³ØªÙ„Ù… 5 Ø¬ÙˆØ§Ù‡Ø± Ù…Ø¬Ø§Ù†ÙŠØ©</p>
        <div id="g_id_onload" 
             data-client_id="295699802302-t4l7rov5vo93g20fuphhbh4sj21dbgu1.apps.googleusercontent.com" 
             data-callback="handleSignIn">
        </div>
        <div class="g_id_signin" data-type="standard" data-shape="pill" data-size="large"></div>
    </div>
</div>

<header id="main-header">
    <div style="display:flex; align-items:center;">
        <span id="user-welcome" class="welcome-msg"></span>
    </div>
    <div style="display:flex; align-items:center; gap:15px;">
        <div style="background:var(--accent); color:white; padding:8px 25px; border-radius:50px; font-weight:900; font-size:1.2rem;">ğŸ’ <span id="pts">0</span></div>
        <img id="user-img" style="width:45px; height:45px; border-radius:50%; border:2px solid var(--primary);">
    </div>
</header>

<div class="container" id="main-content">
    <div id="quiz-section">
        <h2 style="margin-top:0;">ğŸ§© ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h2>
        <p>Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ø¬Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙˆÙØªØ­ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©</p>
        <button class="btn btn-read" style="width:180px;" onclick="showQuiz()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        <div id="quiz-box" style="display:none; margin-top:25px; border-top:1px solid #eee; padding-top:20px;">
            <h3 id="q-text" style="font-size:1.4rem;"></h3>
            <div class="quiz-options" id="options"></div>
        </div>
    </div>

    <h2 style="margin-bottom:25px; font-size:1.8rem;">ğŸ“š Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©</h2>
    <div class="grid" id="stories-grid"></div>

    <div id="story-viewer" class="viewer">
        <button onclick="closeStory()" class="btn" style="width:130px; background:#f1f5f9; color:#475569; margin-bottom:20px;">â¬… Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙƒØªØ¨Ø©</button>
        <h1 id="v-title"></h1>
        <div id="v-text-container">
            <p id="v-text"></p>
        </div>
    </div>
</div>

<script>
    const storiesData = [
        // ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù‡Ù†Ø§ Ù„ØªØµØ¨Ø­ ØºØ§Ù„ÙŠØ© (Ø¨ÙŠÙ† 150 Ùˆ 500)
        { id: 1, title: "ØµØ¨Ø± Ø£ÙŠÙˆØ¨ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", price: 150, text: "ØªØ¨Ø¯Ø£ Ù‚ØµØ© Ù†Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ø£ÙŠÙˆØ¨ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù… Ø¨Ø£Ø±ÙˆØ¹ Ø£Ù…Ø«Ù„Ø© Ø§Ù„ØµØ¨Ø± Ø§Ù„ØªÙŠ Ø¹Ø±ÙØªÙ‡Ø§ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©... (Ù†Øµ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹)" },
        { id: 2, title: "Ø£ØµØ­Ø§Ø¨ Ø§Ù„ÙƒÙ‡Ù ÙˆØ§Ù„Ø«Ø¨Ø§Øª", price: 200, text: "ÙÙŠ Ø²Ù…Ù† ØºØ§Ø¨Øª ÙÙŠÙ‡ Ø´Ù…Ø³ Ø§Ù„ØªÙˆØ­ÙŠØ¯ ÙˆØ§Ù†ØªØ´Ø± Ø§Ù„Ø¸Ù„Ù…... (Ù†Øµ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹)" },
        { id: 3, title: "ÙŠÙˆØ³Ù Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù….. Ù…Ù† Ø§Ù„Ø¨Ø¦Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø´", price: 350, text: "Ù‚ØµØ© ÙŠÙˆØ³Ù Ù‡ÙŠ Ø£Ø­Ø³Ù† Ø§Ù„Ù‚ØµØµØŒ ØªØ¨Ø¯Ø£ Ø¨Ø±Ø¤ÙŠØ§ ÙˆØªÙ†Ù‡ÙŠ Ø¨ØªØ­Ù‚ÙŠÙ‚Ù‡Ø§... (Ù†Øµ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹)" }
    ];

    const extraTitles = [
        "Ø³Ù„ÙŠÙ…Ø§Ù† ÙˆÙ…Ù†Ø·Ù‚ Ø§Ù„Ø·ÙŠØ±", "ØªÙˆØ¨Ø© Ù‚Ø§ØªÙ„ Ø§Ù„Ù…Ø§Ø¦Ø©", "Ø§Ù„Ø£Ø¹Ù…Ù‰ ÙˆØ§Ù„Ø£Ø¨Ø±Øµ", "Ù…ÙˆØ³Ù‰ ÙˆØ§Ù„Ø¹Ø¨Ø¯ Ø§Ù„ØµØ§Ù„Ø­", "Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ", 
        "Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø±ÙˆÙ‚ Ø¹Ù…Ø±", "Ø³ÙŠØ¯Ø© Ù…ÙƒØ© Ù‡Ø§Ø¬Ø±", "Ø£Ø®Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø¤Ù…Ù†ÙŠÙ†", "ÙŠÙˆÙ†Ø³ ÙˆØ¸Ù„Ù…Ø§Øª Ø§Ù„Ø¨Ø­Ø±", "Ø§Ù„Ù†Ø¬Ø§Ø´ÙŠ Ø§Ù„Ø¹Ø§Ø¯Ù„",
        "Ø§Ø¨Ù†Ø© Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ù„Ø¨Ù†", "Ø¨Ù„Ø§Ù„ Ù…Ø¤Ø°Ù† Ø§Ù„Ø±Ø³ÙˆÙ„", "ÙØ¯Ø§Ø¦ÙŠ Ø§Ù„ØºØ§Ø± Ø¹Ù„ÙŠ", "Ù†Ù‡Ø§ÙŠØ© Ù‚Ø§Ø±ÙˆÙ†", "ÙÙŠØ¶Ø§Ù† Ø§Ù„Ø¹Ø±Ù…",
        "ÙˆØµØ§ÙŠØ§ Ø§Ù„Ø­ÙƒÙŠÙ… Ù„Ù‚Ù…Ø§Ù†", "ÙØªØ­ Ø¨ÙŠØª Ø§Ù„Ù…Ù‚Ø¯Ø³", "Ø®Ø§Ù„Ø¯ Ø³ÙŠÙ Ø§Ù„Ù„Ù‡", "Ø´Ø¬Ø§Ø¹Ø© Ø£Ù… Ø¹Ù…Ø§Ø±Ø©", "ÙˆÙØ§Ø¡ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„Ø³Ù…ÙˆØ£Ù„",
        "Ø®Ø¨ÙŠØ¨ Ø¨Ù† Ø¹Ø¯ÙŠ ÙˆØ§Ù„ØµÙ„Ø¨", "Ø²Ù‡Ø¯ Ø¹Ù…Ø± Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²", "Ù…Ø¹Ø¬Ø²Ø© Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ù†Ø¨ÙˆÙŠ", "Ø¯Ø§ÙˆØ¯ ÙˆØ¬Ø§Ù„ÙˆØª", "ØµØ¨Ø± Ø°Ø§Øª Ø§Ù„Ù†Ø·Ø§Ù‚ÙŠÙ†",
        "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… ÙˆÙ†Ø§Ø± Ø§Ù„Ù†Ù…Ø±ÙˆØ¯", "Ø¥Ø³Ù„Ø§Ù… Ø£Ø³Ø¯ Ø§Ù„Ù„Ù‡ Ø­Ù…Ø²Ø©"
    ];

    extraTitles.forEach((title, index) => {
        storiesData.push({
            id: index + 4,
            title: title,
            price: 180 + (index * 12), // Ø£Ø³Ø¹Ø§Ø± Ù…ØªØ²Ø§ÙŠØ¯Ø© ØªØµÙ„ Ù„Ø£ÙƒØ«Ø± Ù…Ù† 500
            text: `ØªØ¹ØªØ¨Ø± Ù‚ØµØ© ${title} Ù…Ù† Ø£Ø¹Ø¸Ù… Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„ØªÙŠ Ø­ÙØ¸Ù‡Ø§ Ù„Ù†Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ ÙˆØ§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ... (Ù‡Ù†Ø§ Ø§Ù„Ù†Øµ Ø§Ù„Ø·ÙˆÙŠÙ„ Ù„Ø¶Ù…Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©)`
        });
    });

    let points = localStorage.getItem('user_pts') === null ? 5 : parseInt(localStorage.getItem('user_pts'));
    let ownedStories = JSON.parse(localStorage.getItem('owned_list')) || [];

    // Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ
    function handleSignIn(response) {
        const data = JSON.parse(atob(response.credential.split('.')[1]));
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        document.getElementById('login-overlay').style.display = 'none';
        document.getElementById('main-header').style.display = 'flex';
        document.getElementById('main-content').style.display = 'block';
        
        document.getElementById('user-img').src = data.picture;
        document.getElementById('user-welcome').innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${data.name}`;
        
        updateUI();
    }

    function updateUI() {
        document.getElementById('pts').innerText = points;
        const grid = document.getElementById('stories-grid');
        grid.innerHTML = '';
        
        storiesData.forEach(s => {
            const isOwned = ownedStories.includes(s.id);
            grid.innerHTML += `
                <div class="card">
                    <h3 style="color:var(--primary); margin-bottom:10px;">${s.title}</h3>
                    <p style="font-size:0.9rem; color:#64748b;">Ù…Ø¬Ù„Ø¯ ØªØ§Ø±ÙŠØ®ÙŠ Ù…ÙØµÙ„</p>
                    ${isOwned ? 
                        `<button class="btn btn-read" onclick="readStory(${s.id})">ğŸ“– Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø¬Ù„Ø¯</button>` : 
                        `<button class="btn btn-buy" onclick="buyStory(${s.id}, ${s.price})">ğŸ”“ Ø´Ø±Ø§Ø¡ Ø¨Ù€ ${s.price} Ø¬ÙˆÙ‡Ø±Ø©</button>`
                    }
                </div>`;
        });
        localStorage.setItem('user_pts', points);
        localStorage.setItem('owned_list', JSON.stringify(ownedStories));
    }

    function buyStory(id, price) {
        if (points >= price) {
            points -= price;
            ownedStories.push(id);
            updateUI();
            alert("âœ… ØªÙ… Ø´Ø±Ø§Ø¡ Ø§Ù„Ù‚ØµØ© Ø¨Ù†Ø¬Ø§Ø­!");
        } else {
            alert("âŒ Ø¬ÙˆØ§Ù‡Ø±Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠØ©. Ø§Ù„Ø¹Ø¨ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù„Ø¬Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø·!");
        }
    }

    function readStory(id) {
        const s = storiesData.find(x => x.id === id);
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('stories-grid').style.display = 'none';
        document.getElementById('main-content').querySelector('h2').style.display = 'none';
        
        const viewer = document.getElementById('story-viewer');
        viewer.style.display = 'block';
        document.getElementById('v-title').innerText = s.title;
        document.getElementById('v-text').innerText = s.text + "\n\n" + s.text + "\n\n" + s.text;
        window.scrollTo(0,0);
    }

    function closeStory() {
        document.getElementById('quiz-section').style.display = 'block';
        document.getElementById('stories-grid').style.display = 'grid';
        document.getElementById('main-content').querySelector('h2').style.display = 'block';
        document.getElementById('story-viewer').style.display = 'none';
    }

    function showQuiz() {
        const qBox = document.getElementById('quiz-box');
        qBox.style.display = 'block';
        const questions = [
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ù„Ù‚Ø¨ Ø¨Ù€ Ø°Ùˆ Ø§Ù„Ù†ÙˆÙ†ØŸ", a: ["ÙŠÙˆÙ†Ø³", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ø¹ÙŠØ³Ù‰"], c: 0 },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø³Ø¬Ø¯Ø§Øª Ø§Ù„ØªÙ„Ø§ÙˆØ© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ", a: ["10", "15", "12"], c: 1 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø£ÙˆÙ„ Ù…Ø³Ø¬Ø¯ Ø¨Ù†ÙŠ ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ", a: ["Ù‚ÙØ¨Ø§Ø¡", "Ø§Ù„Ø­Ø±Ø§Ù…", "Ø§Ù„Ù†Ø¨ÙˆÙŠ"], c: 0 }
        ];
        const q = questions[Math.floor(Math.random() * questions.length)];
        document.getElementById('q-text').innerText = q.q;
        const optDiv = document.getElementById('options');
        optDiv.innerHTML = '';
        q.a.forEach((ans, idx) => {
            optDiv.innerHTML += `<button class="option-btn" onclick="checkAnswer(${idx}, ${q.c})">${ans}</button>`;
        });
    }

    function checkAnswer(chosen, correct) {
        if (chosen === correct) {
            // Ù…ÙƒØ§ÙØ£Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (Ù…ØªÙˆØ³Ø·Ø© Ø£Ùˆ Ù‚Ù„ÙŠÙ„Ø©) ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª: Ù…Ø§ Ø¨ÙŠÙ† 3 Ø¥Ù„Ù‰ 8 Ø¬ÙˆØ§Ù‡Ø±
            const reward = Math.floor(Math.random() * 6) + 3; 
            points += reward;
            alert(`ğŸ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø±Ø¨Ø­Øª ${reward} Ø¬ÙˆØ§Ù‡Ø±.`);
        } else {
            alert("ğŸ˜• Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©.");
        }
        document.getElementById('quiz-box').style.display = 'none';
        updateUI();
    }
</script>
</body>
</html>